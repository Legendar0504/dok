<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∞ - –û–∑–¥–æ—Ä–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ü–µ–Ω—Ç—Ä "–ö–î–ú"</title>
    <link rel="icon" type="image/png" href="img/icon.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="js/auth.js"></script>
</head>
<body class="bg-blue-50 font-sans text-gray-700">
    <div class="container mx-auto px-4 py-8">
        <div class="max-w-2xl mx-auto">
            <div class="bg-white rounded-lg shadow-lg p-8">
                <div class="text-center mb-8">
                    <div class="bg-blue-100 p-3 rounded-full inline-block mb-4">
                        <i class="fas fa-cog text-blue-600 text-3xl"></i>
                    </div>
                    <h1 class="text-3xl font-bold text-gray-800 mb-2">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã</h1>
                    <p class="text-gray-600">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</p>
                </div>

                <div class="space-y-6">
                    <!-- –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h3 class="text-lg font-semibold mb-3">–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h3>
                        <div id="systemStatus" class="text-sm">
                            <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞</p>
                        </div>
                        <button onclick="checkSystemStatus()" class="mt-3 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                            <i class="fas fa-check mr-2"></i>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
                        </button>
                    </div>

                    <!-- –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∞ -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h3 class="text-lg font-semibold mb-3">–°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
                        <div class="bg-yellow-50 border border-yellow-200 rounded p-3 mb-4">
                            <p class="text-sm text-yellow-800">
                                <i class="fas fa-info-circle mr-2"></i>
                                –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
                            </p>
                            <ul class="text-sm text-yellow-800 mt-2 ml-4">
                                <li><strong>Email:</strong> admin@kdmsenter.ru</li>
                                <li><strong>–ü–∞—Ä–æ–ª—å:</strong> admin2024</li>
                                <li><strong>–†–æ–ª—å:</strong> admin</li>
                            </ul>
                        </div>
                        <button onclick="createAdmin()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
                            <i class="fas fa-user-plus mr-2"></i>–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∞
                        </button>
                        <button onclick="clearAllData()" class="ml-3 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                            <i class="fas fa-trash mr-2"></i>–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
                        </button>
                    </div>

                    <!-- –õ–æ–≥–∏ -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h3 class="text-lg font-semibold mb-3">–õ–æ–≥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
                        <div id="logs" class="bg-black text-green-400 p-3 rounded text-sm font-mono h-48 overflow-y-auto">
                            <p>–õ–æ–≥–∏ –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å...</p>
                        </div>
                        <button onclick="clearLogs()" class="mt-3 bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">
                            <i class="fas fa-trash mr-2"></i>–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏
                        </button>
                    </div>

                    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h3 class="text-lg font-semibold mb-3">–ù–∞–≤–∏–≥–∞—Ü–∏—è</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                            <a href="login.html" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-center">
                                <i class="fas fa-sign-in-alt mr-2"></i>–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
                            </a>
                            <a href="register.html" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 text-center">
                                <i class="fas fa-user-plus mr-2"></i>–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                            </a>
                            <a href="index.html" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 text-center">
                                <i class="fas fa-home mr-2"></i>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
                            </a>
                            <a href="profile.html" class="bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 text-center">
                                <i class="fas fa-user mr-2"></i>–ü—Ä–æ—Ñ–∏–ª—å
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º console.log –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ UI
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;

        function addLog(message, type = 'info') {
            const logsDiv = document.getElementById('logs');
            const timestamp = new Date().toLocaleTimeString();
            const color = type === 'error' ? 'text-red-400' : type === 'warn' ? 'text-yellow-400' : 'text-green-400';
            const icon = type === 'error' ? '‚ùå' : type === 'warn' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
            
            logsDiv.innerHTML += `<div class="${color}">[${timestamp}] ${icon} ${message}</div>`;
            logsDiv.scrollTop = logsDiv.scrollHeight;
        }

        console.log = function(...args) {
            originalLog.apply(console, args);
            addLog(args.join(' '), 'info');
        };

        console.error = function(...args) {
            originalError.apply(console, args);
            addLog(args.join(' '), 'error');
        };

        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addLog(args.join(' '), 'warn');
        };

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã
        function checkSystemStatus() {
            const statusDiv = document.getElementById('systemStatus');
            const authManager = window.authManager;
            
            if (!authManager) {
                statusDiv.innerHTML = '<p class="text-red-600">‚ùå AuthManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω</p>';
                return;
            }

            const users = authManager.getUsersFromStorage();
            const currentUser = authManager.getCurrentUser();
            const adminExists = users.find(u => u.role === 'admin');

            statusDiv.innerHTML = `
                <div class="space-y-2">
                    <p class="text-green-600">
                        ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: –†–∞–±–æ—Ç–∞–µ—Ç
                    </p>
                    <p class="text-green-600">
                        ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: –î–æ—Å—Ç—É–ø–Ω–æ
                    </p>
                    <p class="text-blue-600">
                        üë• –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${users.length}
                    </p>
                    <p class="${adminExists ? 'text-green-600' : 'text-yellow-600'}">
                        ${adminExists ? '‚úÖ' : '‚ö†Ô∏è'} –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä: ${adminExists ? '–°–æ–∑–¥–∞–Ω' : '–ù–µ —Å–æ–∑–¥–∞–Ω'}
                    </p>
                    <p class="text-blue-600">
                        üë§ –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${currentUser ? currentUser.email : '–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω'}
                    </p>
                </div>
            `;

            console.log('–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∞
        async function createAdmin() {
            const authManager = window.authManager;
            if (!authManager) {
                console.error('AuthManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                return;
            }

            const users = authManager.getUsersFromStorage();
            const adminExists = users.find(u => u.email === 'admin@kdmsenter.ru');
            
            if (adminExists) {
                console.log('–ê–¥–º–∏–Ω —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!');
                alert('–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —É–∂–µ —Å–æ–∑–¥–∞–Ω!');
                return;
            }

            const adminUser = {
                id: 'admin_default',
                email: 'admin@kdmsenter.ru',
                password: 'admin2024',
                firstName: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
                lastName: '–°–∏—Å—Ç–µ–º—ã',
                middleName: '–ì–ª–∞–≤–Ω—ã–π',
                phone: '+7 (999) 123-45-67',
                additionalInfo: '–ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã',
                role: 'admin',
                registrationDate: new Date().toLocaleDateString('ru-RU'),
                lastLogin: new Date().toISOString()
            };

            users.push(adminUser);
            authManager.saveUsersToStorage(users);
            
            console.log('‚úÖ –ê–¥–º–∏–Ω —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!');
            console.log('Email: admin@kdmsenter.ru');
            console.log('–ü–∞—Ä–æ–ª—å: admin2024');
            
            alert('–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–Ω!\nEmail: admin@kdmsenter.ru\n–ü–∞—Ä–æ–ª—å: admin2024');
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
        function clearAllData() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –í–°–ï –¥–∞–Ω–Ω—ã–µ? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!')) {
                localStorage.clear();
                console.log('–í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã');
                alert('–í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–∞.');
                location.reload();
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ª–æ–≥–æ–≤
        function clearLogs() {
            document.getElementById('logs').innerHTML = '<p>–õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã...</p>';
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(checkSystemStatus, 1000);
        });
    </script>
</body>
</html>
